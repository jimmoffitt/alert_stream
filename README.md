# alert_stream
A collection of tools for alerting on weather events, starting with a script designed to trigger a Bluesky post. 

Writes to https://bsky.app/profile/alert-stream.bsky.social

This scripts run on the 'base station' backend and triggers Bluesky post when called. The message is defined in a `message.yaml` YAML file. These files are generated by base station software. The message attributes are evolving but here is a starting version:

```yaml
message: "Red Rocks Park 30-day rain total: 0.71 inches #RainData #30Day #COWx #MHFD"
created_by: "Base station"
created_at: "2024-07-05T17:30:07+07:00" 
sent_at: "2024-07-05T17:30:38+07:00"  
host: "local_flood_monitoring_district"
host_site_id: 2500
target_channel: "bluesky"
```
![An example Bluesky post](docs/images/bluesky_post.png) 

If your alert message files are written to the default `./inbox/` folder, you can call this script from the command line like so:
```bash
    python3 check_alerts.py
```

You can also specify an alternate inbox path (default is `./inbox`) and set verbose mode (`--verbose`).
```bash
    python3 check_alerts.py --inbox /path/to/your/inbox --verbose
```    

Running script with arguments:
```bash
python3 check_alerts.py --inbox /path/to/your/inbox --verbose
```